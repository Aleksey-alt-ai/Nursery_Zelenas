{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Typography,Grid,Card,CardContent,CardMedia,Box,Chip,Pagination}from'@mui/material';import{Link}from'react-router-dom';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const News=()=>{const[news,setNews]=useState([]);const[loading,setLoading]=useState(true);const[page,setPage]=useState(1);const[totalPages,setTotalPages]=useState(1);useEffect(()=>{fetchNews();},[page]);const fetchNews=async()=>{try{const response=await axios.get(\"/api/news?page=\".concat(page,\"&limit=9\"));setNews(response.data.news);setTotalPages(response.data.totalPages);}catch(error){console.error('Error fetching news:',error);}finally{setLoading(false);}};const handlePageChange=(event,value)=>{setPage(value);};if(loading){return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Typography,{children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"})});}return/*#__PURE__*/_jsx(Container,{maxWidth:\"lg\",children:/*#__PURE__*/_jsxs(Box,{sx:{mt:4,mb:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h3\",component:\"h1\",gutterBottom:true,align:\"center\",children:\"\\u041D\\u043E\\u0432\\u043E\\u0441\\u0442\\u0438 \\u043F\\u0438\\u0442\\u043E\\u043C\\u043D\\u0438\\u043A\\u0430\"}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:4,children:news.map(item=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsxs(Card,{component:Link,to:\"/news/\".concat(item._id),sx:{height:'100%',textDecoration:'none',transition:'transform 0.2s','&:hover':{transform:'translateY(-4px)'}},children:[item.image&&/*#__PURE__*/_jsx(CardMedia,{component:\"img\",height:\"200\",image:item.image,alt:item.title}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:item.title}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",paragraph:true,children:[item.content.substring(0,150),\"...\"]}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",children:new Date(item.createdAt).toLocaleDateString('ru-RU')}),item.tags&&item.tags.length>0&&/*#__PURE__*/_jsx(Chip,{label:item.tags[0],size:\"small\"})]})]})]})},item._id))}),news.length===0&&/*#__PURE__*/_jsx(Box,{textAlign:\"center\",sx:{mt:4},children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"text.secondary\",children:\"\\u041D\\u043E\\u0432\\u043E\\u0441\\u0442\\u0438 \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u044B\"})}),totalPages>1&&/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',mt:4},children:/*#__PURE__*/_jsx(Pagination,{count:totalPages,page:page,onChange:handlePageChange,color:\"primary\"})})]})});};export default News;","map":{"version":3,"names":["React","useState","useEffect","Container","Typography","Grid","Card","CardContent","CardMedia","Box","Chip","Pagination","Link","axios","jsx","_jsx","jsxs","_jsxs","News","news","setNews","loading","setLoading","page","setPage","totalPages","setTotalPages","fetchNews","response","get","concat","data","error","console","handlePageChange","event","value","children","maxWidth","sx","mt","mb","variant","component","gutterBottom","align","container","spacing","map","item","xs","md","to","_id","height","textDecoration","transition","transform","image","alt","title","color","paragraph","content","substring","display","justifyContent","alignItems","Date","createdAt","toLocaleDateString","tags","length","label","size","textAlign","count","onChange"],"sources":["C:/Users/ИИ/Documents/GitHub/Nursery_Zelenas/client/src/pages/News.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Container,\r\n  Typography,\r\n  Grid,\r\n  Card,\r\n  CardContent,\r\n  CardMedia,\r\n  Box,\r\n  Chip,\r\n  Pagination\r\n} from '@mui/material';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nconst News = () => {\r\n  const [news, setNews] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [page, setPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n\r\n  useEffect(() => {\r\n    fetchNews();\r\n  }, [page]);\r\n\r\n  const fetchNews = async () => {\r\n    try {\r\n      const response = await axios.get(`/api/news?page=${page}&limit=9`);\r\n      setNews(response.data.news);\r\n      setTotalPages(response.data.totalPages);\r\n    } catch (error) {\r\n      console.error('Error fetching news:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handlePageChange = (event, value) => {\r\n    setPage(value);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container>\r\n        <Typography>Загрузка...</Typography>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container maxWidth=\"lg\">\r\n      <Box sx={{ mt: 4, mb: 4 }}>\r\n        <Typography variant=\"h3\" component=\"h1\" gutterBottom align=\"center\">\r\n          Новости питомника\r\n        </Typography>\r\n\r\n        <Grid container spacing={4}>\r\n          {news.map((item) => (\r\n            <Grid item xs={12} md={4} key={item._id}>\r\n              <Card \r\n                component={Link} \r\n                to={`/news/${item._id}`}\r\n                sx={{ \r\n                  height: '100%', \r\n                  textDecoration: 'none',\r\n                  transition: 'transform 0.2s',\r\n                  '&:hover': {\r\n                    transform: 'translateY(-4px)',\r\n                  }\r\n                }}\r\n              >\r\n                {item.image && (\r\n                  <CardMedia\r\n                    component=\"img\"\r\n                    height=\"200\"\r\n                    image={item.image}\r\n                    alt={item.title}\r\n                  />\r\n                )}\r\n                <CardContent>\r\n                  <Typography variant=\"h6\" gutterBottom>\r\n                    {item.title}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\r\n                    {item.content.substring(0, 150)}...\r\n                  </Typography>\r\n                  <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                    <Typography variant=\"caption\" color=\"text.secondary\">\r\n                      {new Date(item.createdAt).toLocaleDateString('ru-RU')}\r\n                    </Typography>\r\n                    {item.tags && item.tags.length > 0 && (\r\n                      <Chip label={item.tags[0]} size=\"small\" />\r\n                    )}\r\n                  </Box>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n\r\n        {news.length === 0 && (\r\n          <Box textAlign=\"center\" sx={{ mt: 4 }}>\r\n            <Typography variant=\"h6\" color=\"text.secondary\">\r\n              Новости не найдены\r\n            </Typography>\r\n          </Box>\r\n        )}\r\n\r\n        {totalPages > 1 && (\r\n          <Box sx={{ display: 'flex', justifyContent: 'center', mt: 4 }}>\r\n            <Pagination \r\n              count={totalPages} \r\n              page={page} \r\n              onChange={handlePageChange} \r\n              color=\"primary\" \r\n            />\r\n          </Box>\r\n        )}\r\n      </Box>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default News; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}